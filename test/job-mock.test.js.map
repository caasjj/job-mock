{"version":3,"sources":["job-mock.test.js"],"names":[],"mappings":"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","file":"job-mock.test.js","sourcesContent":["\"use strict\";\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\nvar expect = require('chai').expect;\nvar Job = require('job-mock');\nvar colors = require('colors');\nvar Promise = require('bluebird');\n\ndescribe('Job-Mock', function () {\n\n\tdescribe('Job Creation', function CreateJob() {\n\t\tit('should create a job', function it(done) {\n\n\t\t\tvar job = new Job('email');\n\n\t\t\tvar jobName = 'email_' + job.id;\n\n\t\t\texpect(job).to.have.property('name', jobName);\n\t\t\texpect(job).to.have.property('delay', 10);\n\t\t\texpect(job).to.have.property('failProb', 0);\n\t\t\texpect(job).to.have.property('fn');\n\t\t\texpect(job).to.have.property('id');\n\t\t\tdone();\n\t\t});\n\n\t\tit('should be able to inject a job function', function it(done) {\n\n\t\t\tvar runner = function runner() {};\n\t\t\tvar job = new Job('test', 1000, 0.1, runner);\n\n\t\t\tvar jobName = 'test_' + job.id;\n\n\t\t\texpect(job).to.have.property('name', jobName);\n\t\t\texpect(job).to.have.property('delay', 1000);\n\t\t\texpect(job).to.have.property('failProb', 0.1);\n\t\t\texpect(job).to.have.property('fn', runner);\n\n\t\t\tdone();\n\t\t});\n\t});\n\n\tdescribe('Job Property Access', function AccessJob() {\n\n\t\tit('should write writeable properties', function it(done) {\n\n\t\t\tfunction testFn() {}\n\n\t\t\tvar job = new Job();\n\n\t\t\tjob.fn = testFn;\n\t\t\tjob.delay = 5000;\n\t\t\tjob.failProb = 0.5;\n\n\t\t\texpect(job.fn).to.equal(testFn);\n\t\t\texpect(job.delay).to.equal(5000);\n\t\t\texpect(job.failProb).to.equal(0.5);\n\n\t\t\tdone();\n\t\t});\n\n\t\tit('should not write read-only properites', function it(done) {\n\n\t\t\tvar job = new Job('test');\n\n\t\t\texpect(function () {\n\t\t\t\tjob.name = 'new';\n\t\t\t}).to['throw'](Error);\n\t\t\texpect(function () {\n\t\t\t\tjob.startTime = 0;\n\t\t\t}).to['throw'](Error);\n\t\t\texpect(function () {\n\t\t\t\tjob.doneTime = 0;\n\t\t\t}).to['throw'](Error);\n\t\t\texpect(function () {\n\t\t\t\tjob.cancelTime = 0;\n\t\t\t}).to['throw'](Error);\n\t\t\texpect(function () {\n\t\t\t\tjob.runTime = 0;\n\t\t\t}).to['throw'](Error);\n\t\t\texpect(function () {\n\t\t\t\tjob.id = 0;\n\t\t\t}).to['throw'](Error);\n\n\t\t\tdone();\n\t\t});\n\t});\n\n\tdescribe('Job Execution', function RunJob() {\n\n\t\tit('should run a job', function it(done) {\n\n\t\t\tvar job = new Job('test');\n\n\t\t\t// job start off not running\n\t\t\texpect(job.isRunning()).to.equal(false);\n\n\t\t\tvar runPromise = job.run();\n\n\t\t\t// after .run(), it should be running\n\t\t\texpect(job.isRunning()).to.equal(true);\n\n\t\t\t// when done running, then it should no longer be running\n\t\t\trunPromise.then(function (res) {\n\t\t\t\texpect(job.isRunning()).to.equal(false);\n\t\t\t\tdone(null, res);\n\t\t\t})['catch'](done);\n\t\t});\n\n\t\tit('should indicate correct running status of a job', function it(done) {\n\n\t\t\tvar job = new Job('test');\n\n\t\t\texpect(job.isRunning()).to.equal(false);\n\n\t\t\tjob.run();\n\n\t\t\texpect(job.isRunning()).to.equal(true);\n\n\t\t\tdone();\n\t\t});\n\n\t\tit('should run a job with correct delay', function it(done) {\n\n\t\t\tvar delay = 20;\n\t\t\tvar job = new Job('test', delay);\n\n\t\t\tjob.run().then(function (res) {\n\t\t\t\texpect(job._runTime < delay + 30).to.equal(true);\n\t\t\t\texpect(job._runTime >= delay).to.equal(true);\n\t\t\t}).then(function (res) {\n\t\t\t\tdone(null, res);\n\t\t\t})['catch'](function (err) {\n\t\t\t\tdone(err.message);\n\t\t\t});\n\t\t});\n\n\t\tit('should run a job with parameters passed in', function it(done) {\n\n\t\t\tvar runner = function runner(a, b, c) {\n\t\t\t\treturn [a, b, c];\n\t\t\t};\n\n\t\t\tvar job = new Job('test', 10, 0, runner);\n\t\t\tvar obj = { x: 1 };\n\t\t\tjob.run(1, 'a', obj).then(function (res) {\n\t\t\t\tvar _res = _slicedToArray(res, 3);\n\n\t\t\t\tvar a = _res[0];\n\t\t\t\tvar b = _res[1];\n\t\t\t\tvar c = _res[2];\n\n\t\t\t\texpect(a).to.equal(1);\n\t\t\t\texpect(b).to.equal('a');\n\t\t\t\texpect(c).to.equal(obj);\n\n\t\t\t\tdone();\n\t\t\t})['catch'](done);\n\t\t});\n\t});\n\n\tdescribe('Job Cancelation', function CancelJob() {\n\n\t\tit('should not cancel an unstarted job', function it(done) {\n\n\t\t\tvar job = new Job('test', 1000);\n\n\t\t\tjob.cancel(10).then(function (canceled) {\n\t\t\t\texpect(canceled).to.equal(false);\n\t\t\t\tdone(canceled);\n\t\t\t});\n\t\t});\n\n\t\tit('should cancel a running job', function it(done) {\n\n\t\t\tvar job = new Job('test', 1000);\n\n\t\t\tjob.run().then(function (resp) {\n\t\t\t\tdone('Job did not cancel but should have!');\n\t\t\t})['catch'](Promise.CancellationError, function (err) {\n\t\t\t\texpect(err.message).to.equal('Job canceled by user');\n\t\t\t\texpect(job.doneTime).to.be['null'];\n\t\t\t\texpect(job.cancelTime).not.to.be['null'];\n\t\t\t\texpect(job.runTime > 0).to.equal(true);\n\t\t\t})['catch'](done);\n\n\t\t\tjob.cancel(10).then(function (canceled) {\n\t\t\t\texpect(canceled).to.equal(true);\n\t\t\t\tdone(!canceled);\n\t\t\t});\n\t\t});\n\n\t\tit('should not cancel an finished job', function it(done) {\n\n\t\t\tvar job = new Job('test', 10, 0, fn);\n\n\t\t\tfunction fn(params) {\n\t\t\t\treturn Promise.resolve('FN Success');\n\t\t\t}\n\n\t\t\tjob.run().then(function (resp) {\n\t\t\t\texpect(job.doneTime).not.to.be['null'];\n\t\t\t\texpect(job.cancelTime).to.be['null'];\n\t\t\t\texpect(job.runTime > 0).to.equal(true);\n\t\t\t})['catch'](Promise.CancellationError, function (err) {\n\t\t\t\tdone('Job canceled, but should not have!');\n\t\t\t})['catch'](done);\n\n\t\t\tjob.cancel(20).then(function (canceled) {\n\t\t\t\texpect(canceled).to.equal(false);\n\t\t\t\tdone(canceled);\n\t\t\t})['catch'](done);\n\t\t});\n\t});\n});\n//# sourceMappingURL=job-mock.test.js.map"]}